def check_slope(row):
    cnt = 1  # ì—°ì†ëœ ê°™ì€ ë†’ì´ì˜ íƒ€ì¼ ê°œìˆ˜ 

    for i in range(1, N):  # ì™¼ìª½ë¶€í„° ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•œ ì¹¸ì”© í™•ì¸
        if row[i] == row[i-1]:  # ê°™ì€ ë†’ì´ë¼ë©´
            cnt += 1  # ì—°ì† ê°œìˆ˜ ì¦ê°€

        elif row[i] - row[i-1] == 1 and cnt >= X:  # ë†’ì´ê°€ 1 ì¦ê°€
            cnt = 1  # ê²½ì‚¬ë¡œ ì„¤ì¹˜ í›„ ë‹¤ì‹œ ì¹´ìš´íŠ¸ ì‹œì‘

        elif row[i-1] - row[i] == 1 and cnt >= 0:  # ë†’ì´ê°€ 1 ê°ì†Œ 
            cnt = -X + 1  # ê²½ì‚¬ë¡œ ì„¤ì¹˜ 

        else:  # ë†’ì´ ì°¨ì´ê°€ 2 ì´ìƒì´ë©´ í™œì£¼ë¡œ ë¶ˆê°€ëŠ¥
            return 0  

    if cnt >= 0:  # ê²½ì‚¬ë¡œ ì„¤ì¹˜ê°€ ì •ìƒì ìœ¼ë¡œ ëë‚¬ë‹¤ë©´
        return 1  
    return 0  # ë§ˆì§€ë§‰ì— ê²½ì‚¬ë¡œ ì„¤ì¹˜ ë¶ˆê°€ëŠ¥í•˜ë©´ ì‹¤íŒ¨

T = int(input())  # í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ê°œìˆ˜
for tc in range(T): # të²ˆ ë°˜ë³µ
    N, X = map(int, input().split())  # ì§€ë„ í¬ê¸°ì™€ ê²½ì‚¬ë¡œ ê¸¸ì´ ì…ë ¥ë°›ê¸°
    A = []  # ì§€í˜• ì •ë³´ë¥¼ ì €ì¥í•  ë°°ì—´
    result = 0  # ê±´ì„¤ ê°€ëŠ¥í•œ í™œì£¼ë¡œ ê°œìˆ˜

    # ê°€ë¡œì¤„ ê²€ì‚¬
    for i in range(N):
        A.append(list(map(int, input().split())))  # ì§€ë„ ì…ë ¥ ë°›ê¸°
        result += check_slope(A[i])  # í•´ë‹¹ í–‰ì´ í™œì£¼ë¡œ ê±´ì„¤ ê°€ëŠ¥í•œì§€ ê²€ì‚¬

    # ì„¸ë¡œì¤„ ê²€ì‚¬
    for i in range(N):
        temp = []  # ië²ˆì§¸ ì—´ì„ ì €ì¥í•  ë¦¬ìŠ¤íŠ¸
        for j in range(N):
            temp.append(A[j][i])  # ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ê°’ ì¶”ì¶œ
        result += check_slope(temp)  # í•´ë‹¹ ì—´ì´ í™œì£¼ë¡œ ê±´ì„¤ ê°€ëŠ¥í•œì§€ ê²€ì‚¬

    # ğŸ”¹ ê²°ê³¼ ì¶œë ¥
    print("#{} {}".format(tc+1, result))
